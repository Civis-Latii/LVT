<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Latinlexicon</title>
  </head>
    <body>
      <div class="page">
        <div class="main-content">
          <h1>Welcome to Latinlexicon!</h1>
          <p id="quizword"></p> 
          <input class="casecheckboxes" type="checkbox" id="nom" ></input>
          <label for="nom">Nominative</label>
          <input class="casecheckboxes" type="checkbox" id="voc" ></input>
          <label for="voc">Vocative</label>
          <input class="casecheckboxes" type="checkbox" id="acc" ></input>
          <label for="acc">Accusative</label>
          <input class="casecheckboxes" type="checkbox" id="gen" ></input>
          <label for="gen">Genitive</label>
          <input class="casecheckboxes" type="checkbox" id="dat" ></input>
          <label for="dat">Dative</label>
          <input class="casecheckboxes" type="checkbox" id="abl" ></input>
          <label for="abl">Ablative</label><br>

          <button type="button" id="quiz">Next!</button>

          <button id="revealdeclensions">Reveal Declensions</button>
          <p id="displaystatus"></p>

            <table class="declensionstable" id="table">
              <tr>
                <td id="dec"></td>
                <td>Singular</td>
                <td>Plural</td>
              </tr>
              <tr>
                <td>Nom.</td>
                <td id="nom.sg"></td>
                <td id="nom.pl"></td>
              </tr>
              <tr>
                <td>Voc.</td>
                <td id="voc.sg"></td>
                <td id="voc.pl"></td>
              </tr>
              <tr>
                <td>Acc.</td>
                <td id="acc.sg"></td>
                <td id="acc.pl"></td>
              </tr>
              <tr>
                <td>Gen.</td>
                <td id="gen.sg"></td>
                <td id="gen.pl"></td>
              </tr>
              <tr>
                <td>Dat.</td>
                <td id="dat.sg"></td>
                <td id="dat.pl"></td>
              </tr>
              <tr>
                <td>Abl.</td>
                <td id="abl.sg"></td>
                <td id="abl.pl"></td>
              </tr>
              <tr>
                <td colspan = "3" id="currentword"></td>
              </tr>
            </table> 
          </div>
          <div class="buttons">
            <p class="cng-headings">Case</p>
            <div class="casebuttons">
              
              <button class="cases" id="setnom">Nominative</button>
              <button class="cases" id="setvoc">Vocative</button>
              <button class="cases" id="setacc">Accusative</button>
              <button class="cases" id="setgen">Genitive</button>
              <button class="cases" id="setdat">Dative</button>
              <button class="cases" id="setabl">Ablative</button>
            </div>
            <p class="cng-headings">Number</p>
            <div class="numberbuttons">
              
              <button class="numbers" type="button" id="setsg">Singular</button>
              <button class="numbers" type="button" id="setpl">Plural</button>
            </div>
            <p class="cng-headings">Gender</p>
            <div class="genderbuttons">
              
              <button class="genders" type="button" id="masc">Masculine</button>
              <button class="genders" type="button" id="fem">Feminine</button>
              <button class="genders" type="button" id="neut">Neuter</button>
            </div>
            <button class="checkans" type="button" id="checkans">Check!</button>
          </div>
        </div>
    </body>
</html>

<style>
  html, body {
    height: 100%;
    margin: 0;
  }
  body {
    background-image: url("roman background.png");
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-size: cover;
    
    text-align: center;
  }

  .page {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  .buttons {
    margin-top: auto;
  }

  h1 {
    color: #8b0000; /*#d19b08*/
    background-color: #d19b08;
    border: 4px solid #8b0000;
    border-radius: 8px;
    padding: 20px;
    display: block;
    text-align: center;
    width: fit-content;
    margin: 30px auto;
  }

  .selected {
    background-color: #8b0000;
    color: #fff;
  }

  table {
    display: none;
    width: fit-content;
    background-color: #d19b08;
    margin: 0 auto;
    border: 1px solid #a30000;
    border-collapse: collapse;
  }

  td {
    border: 1px solid #8b0000;
    padding: 1px;
  }

  button {
    background-color: #a42a2e;
    border: 0px;
    color: white;
  }

  .casecheckboxes {
    accent-color: #8d0000;
  }
 
  label {
    background-color: #d19b08;
  }
  
  .casebuttons, .numberbuttons, .genderbuttons { 
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
    width: calc(100% - 40px);
    padding-left: 20px;
    padding-right: 20px;
  }
  .cases, .numbers, .genders {
    flex: 1;
    text-align: center;
    margin: 10px 2px;
    padding: 12px 0;
    font-size: 1.1rem;
  }
  .checkans {
    font-weight: bold;
    width: calc(100% - 40px);
    padding: 24px 0;
    margin: 10px 20px 5px;
    font-size: 2.2rem;
  }
  
  .cng-headings {
    margin-top: 0px;
    margin-bottom: 0px;
    padding-left: 20px;
    text-align: left;
    color: #a42a2e;
  }

  #quizword {
    min-height: 1.5em;
    display: block;
    margin: 0;
  }

  #checkans.flash {
    background-color: #8b0000;
    color: white;
  }
  #displaystatus {
    min-height: 1.5em;
  }
</style>

<script>

class Latinword {
    constructor(nom,gen,gender,english) {
        this.nom=nom;
        this.gen=gen;
        this.gender=gender;
        this.english=english;
        this.declension="";

        let stem = "";
        let iumwordslist = ["corporis","temporis","vulneris","itineris","artis","montis","noctis","partis","principis","urbis","civis","hostis","navis","maris"];
        if (gen.slice(-4)=="arum") { //1st plural only
          this.declension="1st";
          stem=gen.slice(0,-4);
          this.nomsg="-";
          this.vocsg="-";
          this.accsg="-";
          this.gensg="-";
          this.datsg="-";
          this.ablsg="-";
          //no 1st neuter
          this.nompl=nom;
          this.vocpl=nom;
          this.accpl=stem+"as";
          this.genpl=gen;
          this.datpl=stem+"is";
          this.ablpl=stem+"is";
        }
          else if (gen.slice(-4)=="orum") { //2nd plural only
          this.declension="2nd";
          stem=gen.slice(0,-4);
          this.nomsg="-";
          this.vocsg="-";
          this.accsg="-";
          this.gensg="-";
          this.datsg="-";
          this.ablsg="-";
          
          this.nompl=nom;
          this.vocpl=nom;
          if (gender=="n pl") {  //2nd plural only, neuter
            this.accpl=nom;
        }
          else {
            this.accpl=stem+"os";
        }
          this.genpl=gen;
          this.datpl=stem+"is";
          this.ablpl=stem+"is";
        }
          else if (gen.slice(-2)=="um" || gen.slice(-3)=="ium") { //3rd plural only
            this.declension="3rd";
            stem=gen.slice(0,-2);
            this.nomsg="-";
            this.vocsg="-";
            this.accsg="-";
            this.gensg="-";
            this.datsg="-";
            this.ablsg="-";
    
            this.nompl=nom;
            this.vocpl=nom;
            if (gender=="n pl") { //3rd plural only, neuter
              this.accpl=nom;
          }
            else {
              this.accpl=stem+"es";
          }
            this.genpl=gen;
            this.datpl=stem+"ibus";
            this.ablpl=stem+"ibus";
        }
          else if (gen.slice(-2)=="uum") { //4th plural only
            this.declension="4th";
            stem=gen.slice(0,-2);
            this.nomsg="-";
            this.vocsg="-";
            this.accsg="-";
            this.gensg="-";
            this.datsg="-";
            this.ablsg="-";
    
            this.nompl=nom; //4th dec. has nom and acc same, regardless of gender
            this.vocpl=nom;
            this.accpl=nom;
            this.genpl=gen;
            this.datpl=stem+"ibus";
            this.ablpl=stem+"ibus";
          }
            //no 5th plural only
        
          else if (gen.slice(-2)=="ae") { //1st singular
            this.declension="1st";
            stem=gen.slice(0,-2);
            this.nomsg=nom;
            this.vocsg=nom;
            this.accsg=stem+"am";
            this.gensg=gen;
            this.datsg=stem+"ae";
            this.ablsg=stem+"a";
            //no 1st neuter
            this.nompl=stem+"ae";
            this.vocpl=stem+"ae";
            this.accpl=stem+"as";
            this.genpl=stem+"arum";
            this.datpl=stem+"is";
            this.ablpl=stem+"is";
          }
          else if (gen.slice(-1)=="i" && !(gen.slice(-2)=="ei")) { //2nd singular, making sure does not apply to 5th dec. "ei"
            this.declension="2nd";
            stem=gen.slice(0,-1);
            this.nomsg=nom;
            if (gender=="n") { //2nd neuter
              this.vocsg=nom;
              this.accsg=nom;
              
              this.nompl=stem+"a";
              this.vocpl=stem+"a";
              this.accpl=stem+"a";
          }
            else {
              this.vocsg=stem+"e";
              this.accsg=stem+"um";
              
              this.nompl=stem+"i";
              this.vocpl=stem+"i";
              this.accpl=stem+"os";
          }
            this.gensg=gen;
            this.datsg=stem+"o";
            this.ablsg=stem+"o";
          
            this.genpl=stem+"orum";
            this.datpl=stem+"is";
            this.ablpl=stem+"is";
          }
          else if (gen.slice(-2)=="is") { //3rd singular
            this.declension="3rd";
            stem=gen.slice(0,-2);
            this.nomsg=nom;
            this.vocsg=nom;
            if (gender=="n") { //3rd neuter
              this.accsg=nom;
              if (nom=="mare") { //accounting for true perfect i stems
                this.nompl=stem+"ia";
                this.vocpl=stem+"ia";
                this.accpl=stem+"ia";  
              }
              else {
                this.nompl=stem+"a";
                this.vocpl=stem+"a";
                this.accpl=stem+"a";

              }
            }
            else {
              this.accsg=stem+"em";
              
              this.nompl=stem+"es";
              this.vocpl=stem+"es";
              this.accpl=stem+"es";
          }
            this.gensg=gen;
            this.datsg=stem+"i";
            this.ablsg=stem+"e";

            if (iumwordslist.includes(gen)) { //accounting for ium words
              this.genpl=stem+"ium";
            }
            else {
              this.genpl=stem+"um";
            }
            this.datpl=stem+"ibus";
            this.ablpl=stem+"ibus";
          }
          else if (gen.slice(-2)=="us") { //4th singular
            this.declension="4th";
            stem=gen.slice(0,-2);
            this.nomsg=nom;
            this.vocsg=nom;
            if (gender=="n") { //4th neuter
              this.accsg=nom;
              this.datsg=nom;
              this.ablsg=nom;
    
              this.nompl=stem+"ua";
              this.vocpl=stem+"ua";
              this.accpl=stem+"ua";
          }
            else {
              this.accsg=stem+"um";
              this.datsg=stem+"ui";
              this.ablsg=stem+"u";
    
              this.nompl=nom;
              this.vocpl=nom;
              this.accpl=nom;
          }
            this.gensg=gen;
    
            this.genpl=stem+"uum";
            this.datpl=stem+"ibus";
            this.ablpl=stem+"ibus";
          }
          else if (gen.slice(-2)=="ei") { //5th singular
            this.declension="5th";
            stem=gen.slice(0,-2);
            this.nomsg=nom;
            this.vocsg=nom;
            this.accsg=nom;
            this.gensg=gen;
            this.datsg=stem+"ei";
            this.ablsg=stem+"e";
            //no 5th neuter
            this.nompl=stem+"es";
            this.vocpl=stem+"es";
            this.accpl=stem+"es";
            this.genpl=stem+"erum";
            this.datpl=stem+"ebus";
            this.ablpl=stem+"ebus";
          }
        }
      }

let wordlist = [];
let words = ("ancilla	ancillae	f	slave-girl, maid	aqua	aquae	f	water	cena	cenae	f	dinner, meal	cura	curae	f	care, worry	dea	deae	f	goddess	domina	dominae	f	mistress	epistula	epistulae	f	letter	femina	feminae	f	woman	filia	filiae	f	daughter	hora	horae	f	hour	ianua	ianuae	f	door	insula	insulae	f	island, block of flats	ira	irae	f	anger	nauta	nautae	m	sailor	pecunia	pecuniae	f	money	poena	poenae	f	punishment	porta	portae	f	gate	puella	puellae	f	girl	regina	reginae	f	queen	Roma	Romae	f	Rome (Romae = at/in Rome)	silva	silvae	f	wood	taberna	tabernae	f	shop, inn	terra	terrae	f	land	turba	turbae	f	crowd	via	viae	f	street, road, way	villa	villae	f	house, country house	vita	vitae	f	life	amicus	amici	m	friend	animus	animi	m	spirit, soul, mind	annus	anni	m	year	bellum	belli	n	war	caelum	caeli	m	sky, heaven	cibus	cibi	m	food	consilium	consilii	n	plan, idea, advice	deus	dei	m	god	dominus	domini	m	master	donum	doni	n	gift, present	equus	equi	m	horse	filius	filii	m	son	forum	fori	n	forum, market-place, marketplace	gladius	gladii	m	sword	hortus	horti	m	garden	imperium	imperii	n	empire, power, command	legatus	legati	m	commander	liberi	liberorum	m pl	children	libertus	liberti	m	freedman, ex-slave	locus	loci	m	place	maritus	mariti	m	husband	modus	modi	m	manner, way, kind	murus	muri	m	wall	nuntius	nuntii	m	messenger, message, news	periculum	periculi	n	danger	praemium	praemii	n	prize, reward, profit	puer	pueri	m	boy	servus	servi	m	slave-girl, maid	signum	signi	n	sign, signal, seal	templum	templi	n	temple	verbum	verbi	n	word	vestimenta	vestimentorum	n pl	clothes	vinum	vini	n	wine	vir	viri	m	man	amor	amoris	m	love	canis	canis	m	dog	caput	capitis	n	head	civis	civis	m/f	citizen	clamor	clamoris	m	shout	comes	comitis	m/f	comrade, companion	corpus	corporis	n	body	custos	custodis	m/f	guard	dux	ducis	m	leader	flumen	fluminis	n	river	frater	fratris	m	brother	homo	hominis	m	man, human being, person	hostis	hostis	m	enemy	ignis	ignis	m	fire	imperator	imperatoris	m	emperor, commander, general	iter	itineris	n	journey, route, way	iuvenis	iuvenis	m	young man	labor	laboris	m	work	legio	legionis	f	legion	lux	lucis	f	light, daylight	mare	maris	n	sea	mater	matris	f	mother	miles	militis	m	soldier	mons	montis	m	mountain	mors	mortis	f	death	navis	navis	f	ship	nomen	nominis	n	name	nox	noctis	f	night	pars	partis	f	part	pater	patris	m	father	pax	pacis	f	peace	pes	pedis	m	foot, paw	princeps	principis	m	chief, chieftan, emperor	rex	regis	m	king	sanguis	sanguinis	m	blood	senator	senatoris	m	senator	senex	senis	m	old man	soror	sororis	f	sister	tempus	temporis	n	time	urbs	urbis	f	city	uxor	uxoris	f	wife	vox	vocis	f	voice	vulnus	vulneris	n	wound	domus	domus	f	home, house (domi = at home)	manus	manus	f	hand, group of people	vultus	vultus	m	expression, face	dies	diei	m	day	res	rei	f	thing, business, matter	spes	spei	f	hope"
).split(String.fromCharCode(9));

for (let i=0;i<words.length;i+=4) {
  let word = new Latinword(words[i],words[i+1],words[i+2],words[i+3]);
  wordlist.push(word);
}

wordlist[wordlist.findIndex(obj => obj.nomsg === "domus")].ablsg="domo";
wordlist[wordlist.findIndex(obj => obj.nomsg === "domus")].accpl="domos";
wordlist[wordlist.findIndex(obj => obj.nomsg === "filius")].vocsg="fili";

function random() {
  return wordlist[Math.floor(Math.random() * wordlist.length)]; //returns random word
}

 
let displaynomsg = false; //initial value of display [case] is false
let displayvocsg = false;
let displayaccsg = false;
let displaygensg = false;
let displaydatsg = false;
let displayablsg = false;
let displaynompl = false;
let displayvocpl = false;
let displayaccpl = false;
let displaygenpl = false;
let displaydatpl = false;
let displayablpl = false;

let Case = "";
let Num = "";
let Gender = "";


document.getElementById("nom").addEventListener("click", function() { //when checkbox clicked toggle value of case
    displaynomsg = !displaynomsg;
    displaynompl = !displaynompl;
})
document.getElementById("voc").addEventListener("click", function() {
    displayvocsg = !displayvocsg;
    displayvocpl = !displayvocpl;
})
document.getElementById("acc").addEventListener("click", function() {
    displayaccsg = !displayaccsg;
    displayaccpl = !displayaccpl;
})
document.getElementById("gen").addEventListener("click", function() {
    displaygensg = !displaygensg;
    displaygenpl = !displaygenpl;
})
document.getElementById("dat").addEventListener("click", function() {
    displaydatsg = !displaydatsg;
    displaydatpl = !displaydatpl;
})
document.getElementById("abl").addEventListener("click", function() {
    displayablsg = !displayablsg;
    displayablpl = !displayablpl;
})


document.getElementById("setnom").addEventListener("click", function() {
  Case = "nom";
});
document.getElementById("setvoc").addEventListener("click", function() {
  Case = "voc";
});
document.getElementById("setacc").addEventListener("click", function() {
  Case = "acc";
});
document.getElementById("setgen").addEventListener("click", function() {
  Case = "gen";
});
document.getElementById("setdat").addEventListener("click", function() {
  Case = "dat";
});
document.getElementById("setabl").addEventListener("click", function() {
  Case = "abl";
});

document.getElementById("setsg").addEventListener("click", function() {
  Num = "sg";
});
document.getElementById("setpl").addEventListener("click", function() {
  Num = "pl";
});

document.getElementById("fem").addEventListener("click", function() {
  Gender = 'f';
});
document.getElementById("masc").addEventListener("click", function() {
  Gender = 'm';
});
document.getElementById("neut").addEventListener("click", function() {
  Gender = 'n';
});

let currentword = null;
let currentform = "";

function quiz() {
  if (document.getElementById("table").style.display=="block") {
    document.getElementById("table").style.display="none";
  }
  cases.forEach(btn => {
    btn.classList.remove("selected")
  })
  numbers.forEach(btn => {
    btn.classList.remove("selected")
  })
  genders.forEach(btn => {
    btn.classList.remove("selected")
  })
  document.getElementById("displaystatus").innerHTML=""
  let randword = random();
  let quizwords = [];
  if (displaynomsg && randword.nomsg !== '-') {quizwords.push(randword.nomsg);}
  if (displayvocsg && randword.vocsg !== '-') {quizwords.push(randword.vocsg);}
  if (displayaccsg && randword.accsg !== '-') {quizwords.push(randword.accsg);}
  if (displaygensg && randword.gensg !== '-') {quizwords.push(randword.gensg);}
  if (displaydatsg && randword.datsg !== '-') {quizwords.push(randword.datsg);}
  if (displayablsg && randword.ablsg !== '-') {quizwords.push(randword.ablsg);}
  if (displaynompl) {quizwords.push(randword.nompl);}
  if (displayvocpl) {quizwords.push(randword.vocpl);}
  if (displayaccpl) {quizwords.push(randword.accpl);}
  if (displaygenpl) {quizwords.push(randword.genpl);}
  if (displaydatpl) {quizwords.push(randword.datpl);}
  if (displayablpl) {quizwords.push(randword.ablpl);}

  if (quizwords.length == 0) {
    document.getElementById("displaystatus").innerHTML="Please select case before quizzing!";
    return;
  }

  let word = quizwords[Math.floor(Math.random() * quizwords.length)];

  currentword = randword;
  currentform = word;

  document.getElementById("quizword").innerHTML=word;
}

function checkans(randomword,randomform) {
    
    if (randomword.gender !== Gender || randomform !== randomword[Case+Num]){
      document.getElementById("displaystatus").innerHTML="Incorrect!";
    }
    else {
      document.getElementById("displaystatus").innerHTML="Correct!";
     }
  }

document.getElementById("quiz").addEventListener("click",function(){
  quiz()
});

document.getElementById("checkans").addEventListener("click",function(){
  this.classList.add("flash");
  setTimeout(() => {
    this.classList.remove("flash");
  }, 100);
  if (!currentword) {
    if (document.getElementById("quiz").clicked !== true) {
      document.getElementById("displaystatus").innerHTML="Please start the quiz before checking your answer!";
    }
    else {
      document.getElementById("displaystatus").innerHTML="Please select case(s) before quizzing!";
    }
    return; //if you click this before next it returns above. fix.
  }
  checkans(currentword,currentform);
});

const cases = document.querySelectorAll(".cases");

cases.forEach(btn => {
  btn.addEventListener("click", function() {
    cases.forEach(b => b.classList.remove("selected"));
    this.classList.add("selected");
  })
})

const numbers = document.querySelectorAll(".numbers");

numbers.forEach(btn => {
  btn.addEventListener("click", function() {
    numbers.forEach(b => b.classList.remove("selected"));
    this.classList.add("selected");
  })
})

const genders = document.querySelectorAll(".genders");

genders.forEach(btn => {
  btn.addEventListener("click", function() {
    genders.forEach(b => b.classList.remove("selected"));
    this.classList.add("selected");
  })
})

document.getElementById("revealdeclensions").addEventListener("click", function() {
  table()
})

function table() {
  document.getElementById("dec").innerHTML=`${currentword.declension} dec.`;
  document.getElementById("nom.sg").innerHTML=currentword.nomsg;
  document.getElementById("voc.sg").innerHTML=currentword.vocsg;
  document.getElementById("acc.sg").innerHTML=currentword.accsg;
  document.getElementById("gen.sg").innerHTML=currentword.gensg;
  document.getElementById("dat.sg").innerHTML=currentword.datsg;
  document.getElementById("abl.sg").innerHTML=currentword.ablsg;
  document.getElementById("nom.pl").innerHTML=currentword.nompl;
  document.getElementById("voc.pl").innerHTML=currentword.vocpl;
  document.getElementById("acc.pl").innerHTML=currentword.accpl;
  document.getElementById("gen.pl").innerHTML=currentword.genpl;
  document.getElementById("dat.pl").innerHTML=currentword.datpl;
  document.getElementById("abl.pl").innerHTML=currentword.ablpl;
  document.getElementById("currentword").innerHTML=`${currentword.nom}, ${currentword.gen}, ${currentword.gender}`;
  if (document.getElementById("table").style.display=="none") {
    document.getElementById("table").style.display="block";
  }
  else {
    document.getElementById("table").style.display="none";
  }
}

document.getElementById("table").style.display="none";


//Resize the other buttons and make sure there is space at the top like vice verba
//Add a score/progress counter for users
//This should have Correct: x/y; Streak: ; Accuracy: z%;
</script>